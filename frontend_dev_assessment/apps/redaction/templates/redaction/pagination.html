<script type="module">
	globalThis.emitUpdatedPage = emitUpdatedPage;
	function emitUpdatedPage(currentPage) {
		document
			.getElementById("pdf-signals")
			.dispatchEvent(updatePagination(currentPage));
	}

	function updatePagination(page) {
		return new CustomEvent("paginationchanged", {
			detail: {
				page,
				source: "document-detail-pagination",
			},
		});
	}
</script>

<div
	class="mt-4 flex items-center justify-center border-t border-gray-200 pt-4 gap-2"
	data-signals:_pages="{currentPage: 1, totalPages: 1}"
>
	<button
		data-on:click="if($_pages.currentPage > 1) { $_pages.currentPage--; emitUpdatedPage($_pages.currentPage) }"
		data-attr:disabled="$_pages.currentPage <= 1"
		data-class="{'opacity-50 cursor-not-allowed bg-gray-100 text-gray-400': $_pages.currentPage <= 1, 'bg-gray-100 text-gray-700 hover:bg-gray-200': $_pages.currentPage > 1}"
		class="flex items-center space-x-1 px-3 py-2 rounded-lg transition-colors"
	>
		<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
			<path
				stroke-linecap="round"
				stroke-linejoin="round"
				stroke-width="2"
				d="M15 19l-7-7 7-7"
			></path>
		</svg>
		<span>Previous</span>
	</button>

	<span class="text-sm text-gray-600">
		Page <span data-text="$_pages.currentPage" class="font-semibold"></span> of
		<span
			id="totalPages"
			data-on:totalpagesevent="$_pages.totalPages = evt.detail.totalPages"
			data-text="$_pages.totalPages"
			class="font-semibold"
		></span>
	</span>

	<button
		id="next-page"
		data-on:click="if($_pages.currentPage < $_pages.totalPages) { $_pages.currentPage++; emitUpdatedPage($_pages.currentPage) }"
		data-attr:disabled="$_pages.currentPage >= $_pages.totalPages"
		data-class="{'opacity-50 cursor-not-allowed bg-gray-100 text-gray-400': $_pages.currentPage >= $_pages.totalPages, 'bg-gray-100 text-gray-700 hover:bg-gray-200': $_pages.currentPage < $_pages.totalPages}"
		class="flex items-center space-x-1 px-3 py-2 rounded-lg transition-colors"
	>
		<span>Next</span>
		<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
			<path
				stroke-linecap="round"
				stroke-linejoin="round"
				stroke-width="2"
				d="M9 5l7 7-7 7"
			></path>
		</svg>
	</button>
</div>
